{"timestamp":"2025-08-08T04:30:51.528Z","message":"Analyzing index usage...","data":null}
{"timestamp":"2025-08-08T04:30:52.064Z","message":"Index usage analysis failed","data":{"error":"Do not know how to serialize a BigInt"}}
{"timestamp":"2025-08-08T04:30:52.071Z","message":"Migration script completed and disconnected","data":null}
{"timestamp":"2025-08-08T04:31:20.142Z","message":"Starting safe index migration...","data":null}
{"timestamp":"2025-08-08T04:31:20.143Z","message":"Processing HIGH priority index: idx_stock_price_cache_symbol_updated","data":{"table":"StockPriceCache","purpose":"Optimize market data queries with symbol + freshness"}}
{"timestamp":"2025-08-08T04:31:20.143Z","message":"Creating index: idx_stock_price_cache_symbol_updated","data":null}
{"timestamp":"2025-08-08T04:31:20.815Z","message":"Failed to create index idx_stock_price_cache_symbol_updated","data":{"error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"StockPriceCache\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_stock_price_cache_symbol_updated \n              ON \"StockPriceCache\" (symbol, \"lastUpdatedAt\" DESC)"}}
{"timestamp":"2025-08-08T04:31:21.818Z","message":"Processing MEDIUM priority index: idx_journal_entry_user_created","data":{"table":"JournalEntry","purpose":"Optimize user journal queries with date sorting"}}
{"timestamp":"2025-08-08T04:31:21.818Z","message":"Creating index: idx_journal_entry_user_created","data":null}
{"timestamp":"2025-08-08T04:31:21.995Z","message":"Failed to create index idx_journal_entry_user_created","data":{"error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"JournalEntry\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_journal_entry_user_created \n              ON \"JournalEntry\" (\"userId\", \"createdAt\" DESC)"}}
{"timestamp":"2025-08-08T04:31:23.004Z","message":"Processing MEDIUM priority index: idx_account_fee_user_account_date","data":{"table":"AccountFee","purpose":"Optimize account fee queries with date range filtering"}}
{"timestamp":"2025-08-08T04:31:23.005Z","message":"Creating index: idx_account_fee_user_account_date","data":null}
{"timestamp":"2025-08-08T04:31:23.234Z","message":"Failed to create index idx_account_fee_user_account_date","data":{"error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"AccountFee\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_account_fee_user_account_date \n              ON \"AccountFee\" (\"userId\", \"stockAccountId\", \"feeDate\" DESC)"}}
{"timestamp":"2025-08-08T04:31:24.241Z","message":"Processing LOW priority index: idx_transaction_user_pl_not_null","data":{"table":"Transaction","purpose":"Optimize profit/loss statistics queries (partial index)"}}
{"timestamp":"2025-08-08T04:31:24.241Z","message":"Creating index: idx_transaction_user_pl_not_null","data":null}
{"timestamp":"2025-08-08T04:31:24.416Z","message":"Failed to create index idx_transaction_user_pl_not_null","data":{"error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"Transaction\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_transaction_user_pl_not_null \n              ON \"Transaction\" (\"userId\", \"calculatedPl\") \n              WHERE \"calculatedPl\" IS NOT NULL"}}
{"timestamp":"2025-08-08T04:31:25.421Z","message":"Processing LOW priority index: idx_transaction_user_type_date","data":{"table":"Transaction","purpose":"Optimize transaction queries by type with date sorting"}}
{"timestamp":"2025-08-08T04:31:25.422Z","message":"Creating index: idx_transaction_user_type_date","data":null}
{"timestamp":"2025-08-08T04:31:25.609Z","message":"Failed to create index idx_transaction_user_type_date","data":{"error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"Transaction\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_transaction_user_type_date \n              ON \"Transaction\" (\"userId\", type, \"transactionDate\" DESC)"}}
{"timestamp":"2025-08-08T04:31:26.630Z","message":"Index migration completed","data":{"totalIndexes":5,"successful":0,"failed":5,"results":[{"indexName":"idx_stock_price_cache_symbol_updated","status":"FAILED","error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"StockPriceCache\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_stock_price_cache_symbol_updated \n              ON \"StockPriceCache\" (symbol, \"lastUpdatedAt\" DESC)"},{"indexName":"idx_journal_entry_user_created","status":"FAILED","error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"JournalEntry\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_journal_entry_user_created \n              ON \"JournalEntry\" (\"userId\", \"createdAt\" DESC)"},{"indexName":"idx_account_fee_user_account_date","status":"FAILED","error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"AccountFee\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_account_fee_user_account_date \n              ON \"AccountFee\" (\"userId\", \"stockAccountId\", \"feeDate\" DESC)"},{"indexName":"idx_transaction_user_pl_not_null","status":"FAILED","error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"Transaction\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_transaction_user_pl_not_null \n              ON \"Transaction\" (\"userId\", \"calculatedPl\") \n              WHERE \"calculatedPl\" IS NOT NULL"},{"indexName":"idx_transaction_user_type_date","status":"FAILED","error":"\nInvalid `prisma.$executeRawUnsafe()` invocation:\n\n\nRaw query failed. Code: `42P01`. Message: `relation \"Transaction\" does not exist`","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_transaction_user_type_date \n              ON \"Transaction\" (\"userId\", type, \"transactionDate\" DESC)"}]}}
{"timestamp":"2025-08-08T04:31:26.639Z","message":"Migration script completed and disconnected","data":null}
{"timestamp":"2025-08-08T04:33:42.938Z","message":"Analyzing index usage...","data":null}
{"timestamp":"2025-08-08T04:33:43.402Z","message":"Index usage analysis completed","data":{"indexCount":4}}
{"timestamp":"2025-08-08T04:33:43.410Z","message":"Migration script completed and disconnected","data":null}
{"timestamp":"2025-08-08T04:33:55.369Z","message":"Starting safe index migration...","data":null}
{"timestamp":"2025-08-08T04:33:55.928Z","message":"Detected target schema: trading_journal","data":null}
{"timestamp":"2025-08-08T04:33:55.928Z","message":"Processing HIGH priority index: idx_stock_price_cache_symbol_updated","data":{"table":"StockPriceCache","purpose":"Optimize market data queries with symbol + freshness"}}
{"timestamp":"2025-08-08T04:33:55.929Z","message":"Creating index: idx_stock_price_cache_symbol_updated","data":null}
{"timestamp":"2025-08-08T04:33:56.222Z","message":"Index idx_stock_price_cache_symbol_updated created successfully","data":{"duration":"176ms"}}
{"timestamp":"2025-08-08T04:33:57.233Z","message":"Processing MEDIUM priority index: idx_journal_entry_user_created","data":{"table":"JournalEntry","purpose":"Optimize user journal queries with date sorting"}}
{"timestamp":"2025-08-08T04:33:57.233Z","message":"Creating index: idx_journal_entry_user_created","data":null}
{"timestamp":"2025-08-08T04:33:57.422Z","message":"Index idx_journal_entry_user_created created successfully","data":{"duration":"129ms"}}
{"timestamp":"2025-08-08T04:33:58.425Z","message":"Processing MEDIUM priority index: idx_account_fee_user_account_date","data":{"table":"AccountFee","purpose":"Optimize account fee queries with date range filtering"}}
{"timestamp":"2025-08-08T04:33:58.425Z","message":"Creating index: idx_account_fee_user_account_date","data":null}
{"timestamp":"2025-08-08T04:33:58.611Z","message":"Index idx_account_fee_user_account_date created successfully","data":{"duration":"125ms"}}
{"timestamp":"2025-08-08T04:33:59.637Z","message":"Processing LOW priority index: idx_transaction_user_pl_not_null","data":{"table":"Transaction","purpose":"Optimize profit/loss statistics queries (partial index)"}}
{"timestamp":"2025-08-08T04:33:59.637Z","message":"Creating index: idx_transaction_user_pl_not_null","data":null}
{"timestamp":"2025-08-08T04:33:59.871Z","message":"Index idx_transaction_user_pl_not_null created successfully","data":{"duration":"128ms"}}
{"timestamp":"2025-08-08T04:34:00.893Z","message":"Processing LOW priority index: idx_transaction_user_type_date","data":{"table":"Transaction","purpose":"Optimize transaction queries by type with date sorting"}}
{"timestamp":"2025-08-08T04:34:00.893Z","message":"Creating index: idx_transaction_user_type_date","data":null}
{"timestamp":"2025-08-08T04:34:01.102Z","message":"Index idx_transaction_user_type_date created successfully","data":{"duration":"141ms"}}
{"timestamp":"2025-08-08T04:34:02.103Z","message":"Index migration completed","data":{"totalIndexes":5,"successful":5,"failed":0,"results":[{"indexName":"idx_stock_price_cache_symbol_updated","status":"CREATED","duration":"176ms","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_stock_price_cache_symbol_updated \n              ON \"trading_journal\".\"StockPriceCache\" (symbol, \"lastUpdatedAt\" DESC)"},{"indexName":"idx_journal_entry_user_created","status":"CREATED","duration":"129ms","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_journal_entry_user_created \n              ON \"trading_journal\".\"JournalEntry\" (\"userId\", \"createdAt\" DESC)"},{"indexName":"idx_account_fee_user_account_date","status":"CREATED","duration":"125ms","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_account_fee_user_account_date \n              ON \"trading_journal\".\"AccountFee\" (\"userId\", \"stockAccountId\", \"feeDate\" DESC)"},{"indexName":"idx_transaction_user_pl_not_null","status":"CREATED","duration":"128ms","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_transaction_user_pl_not_null \n              ON \"trading_journal\".\"Transaction\" (\"userId\", \"calculatedPl\") \n              WHERE \"calculatedPl\" IS NOT NULL"},{"indexName":"idx_transaction_user_type_date","status":"CREATED","duration":"141ms","sql":"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_transaction_user_type_date \n              ON \"trading_journal\".\"Transaction\" (\"userId\", type, \"transactionDate\" DESC)"}]}}
{"timestamp":"2025-08-08T04:34:02.111Z","message":"Migration script completed and disconnected","data":null}
